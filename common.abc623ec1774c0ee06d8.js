(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{Gdn9:function(t,e,o){"use strict";o.d(e,"a",function(){return h});var s=o("vkgz"),r=o("lJxs"),c=o("fXoL"),n=o("I/3d"),i=o("AytR");let a=(()=>{class t{constructor(t){this.firestore=t}doc$(t){return this.firestore.doc(`${this.basePath}/${t}`).valueChanges().pipe(Object(s.a)(e=>{i.a.production||(console.groupCollapsed(`Firestore Streaming [${this.basePath}] [doc$] ${t}`),console.log(e),console.groupEnd())}))}collection$(t){return console.log(this.basePath),this.firestore.collection(""+this.basePath,t).valueChanges().pipe(Object(s.a)(t=>{i.a.production||(console.groupCollapsed(`Firestore Streaming [${this.basePath}] [collection$]`),console.table(t),console.groupEnd())}))}create(t){const e=this.firestore.createId();return this.collection.doc(e).set(Object.assign({},{id:e},t)).then(o=>{i.a.production||(console.groupCollapsed(`Firestore Service [${this.basePath}] [create]`),console.log("[Id]",e,t),console.groupEnd())})}delete(t){return this.collection.doc(t).delete().then(e=>{i.a.production||(console.groupCollapsed(`Firestore Service [${this.basePath}] [delete]`),console.log("[Id]",t),console.groupEnd())})}get collection(){return this.firestore.collection(""+this.basePath)}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(n.a))},t.\u0275prov=c.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),l=(()=>{class t extends a{constructor(){super(...arguments),this.basePath="products"}}return t.\u0275fac=function(e){return u(e||t)},t.\u0275prov=c.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const u=c.Nb(l);var p=o("2Vo4");let d=(()=>{class t extends class{constructor(t){this.bs=new p.a(t),this.state$=this.bs.asObservable(),this.state=t,this.state$.subscribe(t=>{this.state=t})}patch(t,e="Not specified"){this.previous=this.state;const o=Object.assign({},this.state,t);i.a.production||(console.groupCollapsed(`[${this.store} store] [patch] [event: ${e}]`),console.log("change",t),console.log("prev",this.previous),console.log("next",o),console.groupEnd()),this.bs.next(o)}set(t,e="Not specified"){this.previous=this.state;const o=Object.assign({},t);i.a.production||(console.groupCollapsed(`[${this.store} store] [set] [event: ${e}]`),console.log("change",t),console.log("prev",this.previous),console.log("next",o),console.groupEnd()),this.bs.next(o)}}{constructor(){super({loading:!0,products:[]}),this.store="products-page"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=c.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),h=(()=>{class t{constructor(t,e){this.firestore=t,this.store=e,this.collectionPath="products",this.firestore.collection$().pipe(Object(s.a)(t=>{this.store.patch({loading:!1,products:t},"products collection subscription")})).subscribe()}get products$(){return this.store.state$.pipe(Object(r.a)(t=>t.loading?[]:t.products))}get loading$(){return this.store.state$.pipe(Object(r.a)(t=>t.loading))}get noResults$(){return this.store.state$.pipe(Object(r.a)(t=>!t.loading&&t.products&&0===t.products.length))}get formStatus$(){return this.store.state$.pipe(Object(r.a)(t=>t.formStatus))}create(t){return this.store.patch({loading:!0,products:[],formStatus:"Saving..."},"product created"),this.firestore.create(t).then(t=>{this.store.patch({formStatus:"Saved!"},"product create SUCCESS"),setTimeout(()=>this.store.patch({formStatus:""},"product create timeout reset formStatus"),2e3)}).catch(t=>{this.store.patch({loading:!1,formStatus:"An error ocurred"},"product create ERROR")})}delete(t){return this.store.patch({loading:!0,products:[]},"product delete"),this.firestore.delete(t).catch(t=>{this.store.patch({loading:!1,formStatus:"An error ocurred"},"product delete ERROR")})}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(l),c.Pb(d))},t.\u0275prov=c.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);