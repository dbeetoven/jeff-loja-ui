(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{XcCt:function(t,e,o){"use strict";o.r(e),o.d(e,"ShoppingCartModule",function(){return x});var r=o("ofXK"),i=o("3Pt+"),c=o("tyNb"),n=o("AytR"),s=o("fXoL"),a=o("Gdn9"),b=o("I/3d");let d=(()=>{class t{constructor(t){this.firestore=t}addSize(t){this.firestore.collection("sizes").add(t).then(t=>{n.a.production||console.log("Size added :"+t)})}addCategory(t){this.firestore.collection("categories").add(t).then(t=>{n.a.production||console.log("Category added :"+t)})}addOrderTransaction(t){return this.firestore.collection("orders").add(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Rb(b.a))},t.\u0275prov=s.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var l=o("tk/3");let u=(()=>{class t{constructor(t){this.httpService=t}sendOrderMail(t){return this.httpService.post(n.a.mailSenderApi+"/sendMail",t)}}return t.\u0275fac=function(e){return new(e||t)(s.Rb(l.b))},t.\u0275prov=s.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=o("jhN1"),p=o("a7Ry");const f=function(){return{style:"currency",currency:"BRL"}};function h(t,e){if(1&t){const t=s.Ob();s.Nb(0,"div",28),s.Nb(1,"div",29),s.Nb(2,"div",30),s.Jb(3,"img",31),s.Mb(),s.Nb(4,"div",32),s.Nb(5,"span",33),s.mc(6),s.Mb(),s.Nb(7,"a",34),s.Ub("click",function(){s.hc(t);const o=e.$implicit;return s.Yb().removeProduct(o)}),s.mc(8,"Remover"),s.Mb(),s.Mb(),s.Mb(),s.Nb(9,"div",35),s.Xb(),s.Nb(10,"svg",36),s.Ub("click",function(){s.hc(t);const o=e.$implicit;return s.Yb().removeProductToCart(o)}),s.Jb(11,"path",37),s.Mb(),s.Wb(),s.Jb(12,"input",38),s.Xb(),s.Nb(13,"svg",36),s.Ub("click",function(){s.hc(t);const o=e.$implicit;return s.Yb().addProductToCart(o)}),s.Jb(14,"path",39),s.Mb(),s.Mb(),s.Wb(),s.Nb(15,"span",40),s.mc(16),s.Mb(),s.Nb(17,"span",40),s.mc(18),s.Mb(),s.Mb()}if(2&t){const t=e.$implicit,o=s.Yb();s.yb(3),s.bc("src",o.toSafePathImage(null==t?null:t.image),s.ic),s.yb(3),s.nc(null==t?null:t.title),s.yb(6),s.cc("value",null==t?null:t.quantity),s.yb(4),s.nc(null==t?null:t.price.toLocaleString("pt-BR",s.ec(5,f))),s.yb(2),s.nc(((null==t?null:t.price)*(null==t?null:t.quantity)).toLocaleString("pt-BR",s.ec(6,f)))}}const v=[{path:"",component:(()=>{class t{constructor(t,e,o,r,c,n,s){this.productService=t,this.fb=e,this.commonService=o,this.mailSenderService=r,this.domSanitizer=c,this.route=n,this.localStorage=s,this.form=this.fb.group({name:["",i.k.required],email:["",i.k.required],phone:["",i.k.required]})}removeProduct(t){const e=this.productService.productsIntoCart$.state.filter(({id:e})=>e!==t.id);this.productService.productsIntoCart$.set(e)}addProductToCart(t){const e=this.productService.productsIntoCart$.state,o=e.findIndex(({id:e})=>e===t.id);if(-1===o)return e.push(Object.assign(Object.assign({},t),{quantity:1})),this.productService.productsIntoCart$.set(e),void this.localStorage.setItem("_xcartItems",JSON.stringify(e));e[o].quantity+=1,this.productService.productsIntoCart$.set(e),this.localStorage.setItem("_xcartItems",JSON.stringify(e))}removeProductToCart(t){const e=this.productService.productsIntoCart$.state,o=e.findIndex(({id:e})=>e===t.id);-1!==o&&(e[o].quantity-=1,e[o].quantity<=0?this.removeProduct(t):(this.productService.productsIntoCart$.set(e),this.localStorage.setItem("_xcartItems",JSON.stringify(e))))}onSubmit(t){const e=t;e.products=this.productService.productsIntoCart$.state,e.totalCost=this.totalToPaid,e.quantity=this.totalItems,e.saler="beetovenson@gmail.com",e.body=`Obrigado por sua compra, ${e.name}, email: ${e.email}, Total: ${e.totalCost}`,this.commonService.addOrderTransaction(e).then(t=>{delete e.products,this.mailSenderService.sendOrderMail(e).subscribe(e=>{n.a.production||console.log(`order added :${t}, mail sended: ${e}`),this.route.navigate(["/"]),this.productService.cleanCardProduct()})})}toSafePathImage(t){return this.domSanitizer.bypassSecurityTrustUrl("data:image/png;base64, "+t)}ngOnInit(){this.productService.productsIntoCart$.state$.subscribe(t=>{this.totalItems=t.reduce((t,e)=>t+e.quantity,0),this.totalToPaid=t.reduce((t,e)=>t+e.price*e.quantity,0)})}}return t.\u0275fac=function(e){return new(e||t)(s.Ib(a.a),s.Ib(i.c),s.Ib(d),s.Ib(u),s.Ib(m.b),s.Ib(c.a),s.Ib(p.a))},t.\u0275cmp=s.Cb({type:t,selectors:[["app-shopping-cart"]],decls:52,vars:11,consts:[[1,"container","mx-auto","mt-10"],[1,"flex","my-10","shadow-md"],[1,"w-3/4","px-10","py-10","bg-white"],[1,"flex","justify-between","pb-8","border-b"],[1,"text-2xl","font-semibold"],[1,"flex","mt-10","mb-5"],[1,"w-2/5","text-xs","font-semibold","text-gray-600","uppercase"],[1,"w-1/5","text-xs","font-semibold","text-center","text-gray-600","uppercase"],["class","flex items-center px-6 py-5 -mx-8 hover:bg-gray-100",4,"ngFor","ngForOf"],["routerLink","",1,"flex","mt-10","text-sm","font-semibold","text-indigo-600"],["viewBox","0 0 448 512",1,"w-4","mr-2","text-indigo-600","fill-current"],["d","M134.059 296H436c6.627 0 12-5.373 12-12v-56c0-6.627-5.373-12-12-12H134.059v-46.059c0-21.382-25.851-32.09-40.971-16.971L7.029 239.029c-9.373 9.373-9.373 24.569 0 33.941l86.059 86.059c15.119 15.119 40.971 4.411 40.971-16.971V296z"],["id","summary",1,"w-1/4","px-8","py-10"],[1,"pb-8","text-2xl","font-semibold","border-b"],[1,"flex","justify-between","mt-10","mb-5"],[1,"text-sm","font-semibold","uppercase"],[1,"text-sm","font-semibold"],["autocomplete","off","novalidate","",3,"formGroup","ngSubmit"],[1,"py-2"],["for","name",1,"inline-block","mb-3","text-sm","font-semibold","uppercase"],["type","text","formControlName","name","placeholder","Nome",1,"w-full","p-2","text-sm"],["for","Email",1,"inline-block","mb-3","text-sm","font-semibold","uppercase"],["type","email","id","Email","formControlName","email","placeholder","Email",1,"w-full","p-2","text-sm"],["for","phone",1,"inline-block","mb-3","text-sm","font-semibold","uppercase"],["type","tel","id","phone","formControlName","phone","placeholder","Telefone",1,"w-full","p-2","text-sm"],[1,"mt-8","border-t"],[1,"flex","justify-between","py-6","text-sm","font-semibold","uppercase"],[1,"w-full","py-3","text-sm","font-semibold","text-white","uppercase","bg-indigo-500","disabled:opacity-75","hover:bg-indigo-600",3,"disabled"],[1,"flex","items-center","px-6","py-5","-mx-8","hover:bg-gray-100"],[1,"flex","w-2/5"],[1,"w-20"],["alt","",1,"h-24",3,"src"],[1,"flex","flex-col","justify-between","flex-grow","ml-4"],[1,"text-sm","font-bold"],[1,"text-xs","font-semibold","text-gray-500","hover:text-red-500",3,"click"],[1,"flex","justify-center","w-1/5"],["viewBox","0 0 448 512",1,"w-3","text-gray-600","cursor-pointer","fill-current",3,"click"],["d","M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"],["id","quantityId","type","text",1,"w-8","mx-2","text-center","border",3,"value"],["d","M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"],[1,"w-1/5","text-sm","font-semibold","text-center"]],template:function(t,e){1&t&&(s.Nb(0,"div",0),s.Nb(1,"div",1),s.Nb(2,"div",2),s.Nb(3,"div",3),s.Nb(4,"h1",4),s.mc(5,"Carrinho de Compras"),s.Mb(),s.Nb(6,"h2",4),s.mc(7),s.Mb(),s.Mb(),s.Nb(8,"div",5),s.Nb(9,"h3",6),s.mc(10," Detalhes do produto "),s.Mb(),s.Nb(11,"h3",7),s.mc(12," Quantidade "),s.Mb(),s.Nb(13,"h3",7),s.mc(14," Pre\xe7o "),s.Mb(),s.Nb(15,"h3",7),s.mc(16," Total "),s.Mb(),s.Mb(),s.kc(17,h,19,7,"div",8),s.Zb(18,"async"),s.Nb(19,"a",9),s.Xb(),s.Nb(20,"svg",10),s.Jb(21,"path",11),s.Mb(),s.mc(22," Continue Comprando "),s.Mb(),s.Mb(),s.Wb(),s.Nb(23,"div",12),s.Nb(24,"h1",13),s.mc(25,"Resumo do Pedido"),s.Mb(),s.Nb(26,"div",14),s.Nb(27,"span",15),s.mc(28),s.Mb(),s.Nb(29,"span",16),s.mc(30),s.Mb(),s.Mb(),s.Nb(31,"form",17),s.Ub("ngSubmit",function(){return e.onSubmit(e.form.value)}),s.Nb(32,"div",18),s.Nb(33,"label",19),s.mc(34,"Nome"),s.Mb(),s.Jb(35,"input",20),s.Mb(),s.Nb(36,"div",18),s.Nb(37,"label",21),s.mc(38,"Email"),s.Mb(),s.Jb(39,"input",22),s.Mb(),s.Nb(40,"div",18),s.Nb(41,"label",23),s.mc(42,"Telefone"),s.Mb(),s.Jb(43,"input",24),s.Mb(),s.Nb(44,"div",25),s.Nb(45,"div",26),s.Nb(46,"span"),s.mc(47,"Custo Total"),s.Mb(),s.Nb(48,"span"),s.mc(49),s.Mb(),s.Mb(),s.Nb(50,"button",27),s.mc(51," Fazer Pedido "),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Mb(),s.Mb()),2&t&&(s.yb(7),s.oc("",e.totalItems," itens"),s.yb(10),s.bc("ngForOf",s.ac(18,7,e.productService.productsIntoCart$.state$)),s.yb(11),s.oc("Itens ",e.totalItems," "),s.yb(2),s.nc(e.totalToPaid.toLocaleString("pt-BR",s.ec(9,f))),s.yb(1),s.bc("formGroup",e.form),s.yb(18),s.nc(e.totalToPaid.toLocaleString("pt-BR",s.ec(10,f))),s.yb(1),s.bc("disabled",!e.form.valid))},directives:[r.i,c.c,i.l,i.i,i.f,i.a,i.h,i.e],pipes:[r.b],styles:["@import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,400italic|Montserrat:400,700);"]}),t})()}];let y=(()=>{class t{}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(e){return new(e||t)},imports:[[c.d.forChild(v)],c.d]}),t})(),x=(()=>{class t{}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(e){return new(e||t)},imports:[[r.c,i.j,i.g,y]]}),t})()}}]);